<ion-header class="header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/categories" aria-label="Volver a categorías"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <img src="assets/logo.PNG" alt="Tech Store" class="logo" />
    </ion-title>
  </ion-toolbar>

  <ion-toolbar class="bg-white">
    <ion-breadcrumbs>
      <ion-breadcrumb href="/home">Inicio</ion-breadcrumb>
      <ion-breadcrumb href="/categories">Categorías</ion-breadcrumb>
      <ion-breadcrumb aria-current="page">{{ category }}</ion-breadcrumb>
    </ion-breadcrumbs>
  </ion-toolbar>
</ion-header>

<ion-content class="category-products-page">
  <div *ngIf="isLoading" class="text-center py-5">
    <ion-spinner name="crescent"></ion-spinner>
    <p class="mt-2">Cargando productos...</p>
  </div>

  <div *ngIf="!isLoading" class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fw-bold text-primary">
        <ion-icon name="grid-outline"></ion-icon>
        {{ category | titlecase }}
      </h2>
      <span class="badge bg-secondary rounded-pill">{{ products.length }} productos</span>
    </div>

    <div *ngIf="products.length === 0" class="text-center py-5">
      <div class="card border-0 bg-light">
        <div class="card-body">
          <i class="bi bi-inbox display-1 text-muted"></i>
          <h3 class="mt-3">No hay productos en esta categoría</h3>
          <p class="text-muted">Explora otras categorías disponibles</p>
        </div>
      </div>
    </div>

    <div class="row g-4" *ngIf="products.length > 0">
      <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let product of products">
        <div class="card h-100 shadow-sm">
          <img [src]="product.image || 'assets/placeholder-product.jpg'" [alt]="product.name" class="card-img-top" style="height: 200px; object-fit: cover;" />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-bold text-truncate">{{ product.name }}</h5>
            <p class="card-text text-muted"><i class="bi bi-tag"></i> {{ product.category }}</p>
            <p class="card-text" *ngIf="product.description">
              <small>{{ product.description | slice:0:80 }}...</small>
            </p>
            <div class="mt-auto">
              <div class="d-flex justify-content-between align-items-center">
                <span class="h5 text-primary mb-0">${{ product.price }}</span>
                <ion-button size="small" color="primary" aria-label="Agregar al carrito">Agregar</ion-button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>